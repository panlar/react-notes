var V=Object.defineProperty,M=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var C=(e,o,t)=>o in e?V(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,m=(e,o)=>{for(var t in o||(o={}))$.call(o,t)&&C(e,t,o[t]);if(L)for(var t of L(o))P.call(o,t)&&C(e,t,o[t]);return e},p=(e,o)=>M(e,q(o));import{r as d,j as b,s as H,R as U,a as J}from"./vendor.3d87ed07.js";const K=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}};K();const W=({key:e,initialValue:o=""})=>{const[t,a]=d.exports.useState(()=>{const s=localStorage.getItem(e);return s?JSON.parse(s):o});return[t,s=>{localStorage.setItem(e,JSON.stringify(s)),a(s)}]},z=(e,o,t)=>new Intl.DateTimeFormat(o,t).format(e),w="@switch/buttons",I="@add/note",k="@save/note",A="@delete/note",B="@order/notes",F="@set/noteToEdit",G=(e,o)=>{const{type:t,payload:a}=o;switch(t){case w:return p(m({},e),{isEdit:!e.isEdit});case I:{const n={id:crypto.randomUUID(),title:"",body:"",date:z(new Date,"es",{month:"numeric",year:"numeric",day:"numeric"})};return p(m({},e),{isEdit:!0,noteToEdit:n,notes:[n,...e.notes]})}case k:{const{title:n,body:s}=a,i=p(m({},e.noteToEdit),{title:n,body:s});return p(m({},e),{isEdit:!1,noteToEdit:i,notes:e.notes.map(u=>u.id===e.noteToEdit.id?i:u)})}case A:{const n=e.notes.filter(s=>s.id!==e.noteToEdit.id);return p(m({},e),{notes:n,noteToEdit:n[0]||null})}case F:return p(m({},e),{isEdit:!1,noteToEdit:e.notes.find(n=>n.id===a)});case B:{const n=[...document.querySelectorAll(".Note")].map(s=>s.id);return p(m({},e),{notes:n.map(s=>e.notes.find(i=>s===i.id))})}default:return e}},r=b.exports.jsx,l=b.exports.jsxs,T=b.exports.Fragment,R=d.exports.createContext(),Q={isEdit:!1,noteToEdit:null,notes:[]},X=({children:e})=>{const[o,t]=W({key:"notes_panlar",initialValue:Q}),[a,n]=d.exports.useReducer(G,o),[s,i]=d.exports.useState(!1),[u,N]=d.exports.useState(null),E=()=>n({type:w}),g=()=>n({type:I}),f=c=>n({type:k,payload:c}),v=()=>n({type:A}),y=()=>n({type:B}),S=c=>n({type:F,payload:c}),D=()=>i(c=>!c);return d.exports.useEffect(()=>{t(a)},[a]),r(R.Provider,{value:{state:a,open:s,dragItem:u,switchButtons:E,addNote:g,saveNote:f,deleteNote:v,setNoteToEdit:S,handleOpen:D,setDragItem:N,orderNotes:y},children:e})},h=()=>{const{state:e,open:o,dragItem:t,switchButtons:a,addNote:n,saveNote:s,deleteNote:i,setNoteToEdit:u,handleOpen:N,setDragItem:E,orderNotes:g}=d.exports.useContext(R),{isEdit:f,noteToEdit:v,notes:y}=e;return{isEdit:f,noteToEdit:v,notes:y,open:o,dragItem:t,switchButtons:a,addNote:n,saveNote:s,deleteNote:i,setNoteToEdit:u,handleOpen:N,setDragItem:E,orderNotes:g}},Y=()=>{const{noteToEdit:e,deleteNote:o,handleOpen:t}=h();return r("div",{className:"Modal",children:l("div",{className:"Box",children:[r("h4",{children:"Eliminando Nota..."}),l("p",{children:["Deseal eliminar la nota ",r("b",{children:e.title}),"?"]}),l("div",{children:[r("button",{className:"btn-primary",onClick:t,children:"Cancelar"}),r("button",{className:"btn-secundary",onClick:()=>{t(),o()},children:"Aceptar"})]})]})})};const Z=()=>{const{noteToEdit:e,saveNote:o}=h(),[t,a]=d.exports.useState(()=>({title:e.title,body:e.body})),n=i=>{i.preventDefault(),o(t)},s=i=>a(u=>p(m({},u),{[i.target.name]:i.target.value}));return l("form",{id:"EditNote",className:"EditNote",onSubmit:n,children:[r("input",{autoFocus:!0,type:"text",name:"title",placeholder:"T\xEDtulo",value:t.title,onChange:s}),r("textarea",{name:"body",placeholder:"Escribe tu nota, recuerda que tambien puedes usar Markdown \u{1F92F}",value:t.body,onChange:s}),r("button",{className:"btn-icon btn-primary",children:r("i",{className:"bx bx-save"})})]})};var ee="/assets/post-it.50580081.png";const te=()=>{const{addNote:e}=h();return l("div",{className:"Empty",children:[r("img",{src:ee,alt:"post-it"}),r("h4",{children:"Oops! est\xE1 vacio"}),r("p",{children:"No hay notas en este momento, puedes a\xF1adir una dando clic aqu\xED abajo"}),r("button",{className:"btn-primary",onClick:e,children:"A\xF1adir Nota"})]})},_=()=>{[...document.querySelector(".NotesList").children].forEach((o,t)=>o.dataset.index=t)},ne=new H.Converter({simpleLineBreaks:!0}),j=e=>{var n;const o=ne.makeHtml(e),t=document.createElement("div");t.innerHTML=o;const a=((n=t.children[0])==null?void 0:n.textContent)||"";return{html:o,text:a}};const oe=({note:e})=>{const{setNoteToEdit:o,dragItem:t,setDragItem:a,orderNotes:n}=h(),{id:s,body:i,title:u,date:N}=e,{text:E}=j(i);return l("div",{draggable:"true",className:"Note",onClick:()=>{o(s)},onDragStart:c=>{a(c.target),c.target.classList.add("drag")},onDragOver:c=>{c.preventDefault()},onDragEnter:c=>{const O=document.querySelector(".NotesList"),x=c.currentTarget;x.dataset.index>t.dataset.index?O.insertBefore(t,x.nextElementSibling):O.insertBefore(t,x)},onDragLeave:()=>_(),onDragEnd:c=>{c.target.classList.remove("drag"),n()},id:s,children:[r("h6",{children:u||"Nueva nota..."}),r("p",{children:E}),r("time",{children:N})]})};const se=()=>{d.exports.useEffect(()=>{_()});const{notes:e,isEdit:o}=h();return r("div",{className:"NotesList",children:e.length&&!o?l(T,{children:[r("h5",{children:"Todas las notas"}),e.map(t=>r(oe,{note:t},t.id))]}):null})};const re=()=>{const e=d.exports.useRef(),{switchButtons:o,noteToEdit:t,handleOpen:a}=h(),{html:n,text:s}=j(t.body);return d.exports.useEffect(()=>{e.current.innerHTML=n||s}),l("div",{className:"ViewNote",children:[r("h3",{children:t.title||"Sin T\xEDtulo"}),r("div",{ref:e}),l("div",{className:"actions",children:[r("button",{className:"btn-icon btn-primary",onClick:o,children:r("i",{className:"bx bx-edit"})}),r("button",{className:"btn-icon btn-secundary",onClick:a,children:r("i",{className:"bx bx-trash-alt"})})]})]})};function ae(){const{open:e,isEdit:o,notes:t,addNote:a}=h();return l("div",{className:"App",children:[r("div",{className:"bg"}),e&&r(Y,{}),r(se,{}),t.length?r(T,{children:o?r(Z,{}):l(T,{children:[r(re,{}),r("button",{className:"btn-add btn-primary",onClick:a,children:"Nueva Nota"})]})}):r(te,{})]})}U.render(r(J.StrictMode,{children:r(X,{children:r(ae,{})})}),document.getElementById("root"));
